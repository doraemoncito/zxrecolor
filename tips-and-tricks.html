<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Tips and tricks - ZX Recoloring Project</title>
        <link href="css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">ZX Recoloring Project</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="index.html">About</a>
                            </li>
                            <li >
                                <a href="hello-world.html">Hello, world!</a>
                            </li>
                            <li >
                                <a href="rules-syntax.html">Writing rules</a>
                            </li>
                            <li >
                                <a href="deployment.html">Deployment</a>
                            </li>
                            <li >
                                <a href="handy-tools.html">Handy tools</a>
                            </li>
                            <li class="active">
                                <a href="tips-and-tricks.html">Tips and tricks</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="handy-tools.html">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="disabled">
                                <a rel="prev" >
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#tips-and-tricks">Tips and tricks</a></li>
            <li><a href="#block-and-pixel-matching">Block and pixel matching</a></li>
            <li><a href="#dealing-with-partial-intersections">Dealing with partial intersections</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="tips-and-tricks">Tips and tricks</h1>
<p>Recoloring can be tricky at times. Here are some ideas to help you to deal with typical situations.</p>
<h2 id="block-and-pixel-matching">Block and pixel matching</h2>
<p>If you are pretty sure that a certain sprite is always block-aligned, simply use a block-precise rule:</p>
<div class="codehilite"><pre><span></span>0 block zx_bow.bmp pc_bow.bmp
</pre></div>


<table>
<thead>
<tr>
<th>zx_bow.bmp</th>
<th>pc_bow.bmp</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="images/zx_bow.png" /></td>
<td><img alt="" src="images/pc_bow.png" /></td>
</tr>
</tbody>
</table>
<p>If you are dealing with a moving object, use a pixel-precise rule, and don't forget about transparency, if the object moves over a non-solid background:</p>
<div class="codehilite"><pre><span></span>0 pixel zx_tank.bmp pc_tank.bmp
</pre></div>


<table>
<thead>
<tr>
<th>zx_tank.bmp</th>
<th>pc_tank.bmp</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="images/zx_tank.png" /></td>
<td><img alt="" src="images/pc_tank.png" /></td>
<td><img alt="" src="images/zx_tank_clip.gif" /> <img alt="" src="images/pc_tank_clip.gif" /></td>
</tr>
</tbody>
</table>
<p>Remember, though, that Spectrum sprites can be quite deceptive. Sometimes you may have to deal with sprites that look like this:</p>
<p><img alt="" src="images/loderun_char.png" /></p>
<p>You might think that everything is clear: the character area shold be black, and the rest is transparent. However, this is often incorrect: if you try matching this image, you will get a perfect match for the sprite inside any solid black box! By providing a black-and-pinkish image, you are telling the system: I want these pixels to be of ink color, and I don't care about the rest. Thus, most images used for recognition should have areas of all three types: ink, paper, and transparent.</p>
<h2 id="dealing-with-partial-intersections">Dealing with partial intersections</h2>
<p>If two objects you want see recolored intersect, plain full-sprite matching will not work. There are several ways to deal with this issue, so you will need to choose the right method depending on your particular case.</p>
<p>If you believe that a large enough part of certain object will never be obscured, use it to recognize the full object. This is perhaps the most universal approach that works for all kinds of objects in all situations. However, if you choose a very small fragment for matching, you might get false positives (i.e., accidental matches in unexpected places). Use <code>block</code> matching, if possible, to reduce the chance of a false positive:</p>
<div class="codehilite"><pre><span></span>; note that two rules are used to recognize the block
0 pixel zx_pacman_block-1.bmp pc_pacman_block.bmp
0 pixel zx_pacman_block-2.bmp pc_pacman_block.bmp
1 pixel zx_pacman1.bmp pc_pacman1.bmp
1 pixel zx_pacman2.bmp pc_pacman2.bmp
1 pixel zx_pacman3.bmp pc_pacman3.bmp
1 pixel zx_pacman4.bmp pc_pacman4.bmp
1 pixel zx_pacman5.bmp pc_pacman5.bmp
</pre></div>


<table>
<thead>
<tr>
<th>original</th>
<th>recolored</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="images/zx_pacman1.png" /> <img alt="" src="images/zx_pacman2.png" /> <img alt="" src="images/zx_pacman3.png" /> <img alt="" src="images/zx_pacman4.png" /> <img alt="" src="images/zx_pacman5.png" /><br><img alt="" src="images/zx_pacman_block-1.png" /> <img alt="" src="images/zx_pacman_block-2.png" /></td>
<td><img alt="" src="images/pc_pacman1.png" /> <img alt="" src="images/pc_pacman2.png" /> <img alt="" src="images/pc_pacman3.png" /> <img alt="" src="images/pc_pacman4.png" /> <img alt="" src="images/pc_pacman5.png" /><br><img alt="" src="images/pc_pacman_block.png" /></td>
<td><img alt="" src="images/pacmania_clip.gif" /></td>
</tr>
</tbody>
</table>
<p>If you want to recolor an immovable background object, the easiest solution is to use <code>protected</code> clause:</p>
<div class="codehilite"><pre><span></span>0 block zx_hurdle.bmp pc_hurdle.bmp protected|100
1 pixel horse1.bmp pc_horse1.bmp
1 pixel horse2.bmp pc_horse2.bmp
1 pixel horse3.bmp pc_horse3.bmp
</pre></div>


<table>
<thead>
<tr>
<th>original</th>
<th>recolored</th>
<th>result</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="images/zx_horse1.png" /> <img alt="" src="images/zx_horse2.png" /> <img alt="" src="images/zx_horse3.png" /><br><img alt="" src="images/zx_hurdle.png" /></td>
<td><img alt="" src="images/pc_horse1.png" /> <img alt="" src="images/pc_horse2.png" /> <img alt="" src="images/pc_horse3.png" /><br><img alt="" src="images/pc_hurdle.png" /></td>
<td><img alt="" src="images/sjump_clip.gif" /></td>
</tr>
</tbody>
</table>
<p>Remember that the number of pixels checked by the <code>protected</code> keyword does not include transparent areas, so this value should be chosen carefully. Suppose you have an 8x8 box in your sprite, marked as a background. If the screens goes blank for some reason, the system will still think that at least 64 pixels of the original sprite are still there.</p>
<!-- 
Guess your situation using secondary information RS, IB2

Matching partially intersecting sprites

Matching small immovable background sprites

Rearranging screen layout, drawing decoration

--></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
